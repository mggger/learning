# 可靠的系统使用生产者

当我们使用kafka的生产者， 需要注意两件事情:
- 根据可靠性需求配置恰当的acks值
- 在参数配置和代码里正确处理错误

## 发送确认

- acks = 0  意味着生产者能够通过网络把消息发送出去, 那么就认为消息已成功写入kafka
- acks = 1  首领在收到消息并把它写入到分区数据文件时会返回确认或错误响应。
- acks = all 意味着首领在返回确认或错误响应之前， 会等待所有同步副本都收到消息。


### 配置生产者的重试参数
生产者需要处理的错误包括两部分: 一部分是生产者可以自动处理的错误，还有一部分是需要开发者手动处理的错误。
如果broker返回的错误可以通过重试来解决，那么生产者会自动处理这些错误。

重试发送一个已经失败的消息会带来一些风险，如果两个消息都写入成功，会导致消息重复, 所以需要保证消息的幂等性.


